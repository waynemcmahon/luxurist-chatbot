/*! For license information please see luxurist-chatbot.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.LuxuristChatbot=t(require("React"),require("ReactDOM")):e.LuxuristChatbot=t(e.React,e.ReactDOM)}(this,((e,t)=>(()=>{"use strict";var n={822:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,"/* Custom styles for Voiceflow Chat */\n:root {\n  --vf-primary-color: hsla(23, 91.90%, 29.53%, 1.00);  /* Exact brown */\n  --vf-secondary-color: #FDF8F3; /* Light cream background */\n  --vf-text-color: #333;\n  --vf-background-color: white;\n  --vf-accent-color: #D4AF37; /* Gold */\n}\n\n/* Chat container styles */\n#voiceflow-chat-container {\n  transition: all 0.3s ease-in-out;\n  font-family: 'Inter', sans-serif;\n}\n\n/* Message styles */\n#voiceflow-chat-container .message {\n  animation: slideIn 0.3s ease-out forwards;\n}\n\n#voiceflow-chat-container .message > div {\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n/* User message specific styles */\n#voiceflow-chat-container .message.user > div {\n  background: var(--vf-primary-color);\n  border: 1px solid hsla(23, 91.90%, 29.53%, 0.1);\n}\n\n/* Assistant message specific styles */\n#voiceflow-chat-container .message.assistant > div {\n  background: var(--vf-secondary-color);\n  border: 1px solid hsla(23, 91.90%, 29.53%, 0.1);\n}\n\n/* Input area styles */\n#voiceflow-chat-container .input-area {\n  border-top: 1px solid hsla(23, 91.90%, 29.53%, 0.1);\n}\n\n#voiceflow-chat-container input {\n  border: 1px solid hsla(23, 91.90%, 29.53%, 0.2);\n  transition: all 0.2s ease;\n}\n\n#voiceflow-chat-container input:focus {\n  border-color: var(--vf-primary-color);\n  box-shadow: 0 0 0 2px hsla(23, 91.90%, 29.53%, 0.1);\n}\n\n#voiceflow-chat-container button {\n  background: var(--vf-primary-color);\n  transition: all 0.2s ease;\n}\n\n#voiceflow-chat-container button:hover:not(:disabled) {\n  background: hsla(23, 91.90%, 25%, 1.00);\n  transform: translateY(-1px);\n}\n\n/* Choice buttons */\n#voiceflow-chat-container .choice-button {\n  border: 1px solid hsla(23, 91.90%, 29.53%, 0.2);\n  background: white;\n  transition: all 0.2s ease;\n}\n\n#voiceflow-chat-container .choice-button:hover {\n  background: var(--vf-secondary-color);\n  border-color: var(--vf-primary-color);\n}\n\n/* Typing indicator */\n#voiceflow-chat-container .typing {\n  animation: typing 1.5s infinite;\n  color: var(--vf-primary-color);\n}\n\n/* Custom scrollbar */\n#voiceflow-chat-container ::-webkit-scrollbar {\n  width: 6px;\n}\n\n#voiceflow-chat-container ::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n#voiceflow-chat-container ::-webkit-scrollbar-thumb {\n  background: hsla(23, 91.90%, 29.53%, 0.2);\n  border-radius: 3px;\n}\n\n#voiceflow-chat-container ::-webkit-scrollbar-thumb:hover {\n  background: hsla(23, 91.90%, 29.53%, 0.4);\n}\n\n/* Animations */\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes typing {\n  0% { opacity: 0.3; }\n  50% { opacity: 1; }\n  100% { opacity: 0.3; }\n}\n\n/* Responsive adjustments */\n@media (max-width: 768px) {\n  #voiceflow-chat-container {\n    border-radius: 12px;\n    margin: 1rem 0;\n  }\n}",""]);const s=i},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},20:(e,t,n)=>{var r=n(883),o=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,c={},l=null,d=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!s.hasOwnProperty(r)&&(c[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===c[r]&&(c[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:d,props:c,_owner:i.current}}t.jsx=c,t.jsxs=c},848:(e,t,n)=>{e.exports=n(20)},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],d=a[l]||0,u="".concat(l," ").concat(d);a[l]=d+1;var p=n(u),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var y=o(f,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:y,references:1})}i.push(u)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var c=r(e,o),l=0;l<a.length;l++){var d=n(a[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=c}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},883:t=>{t.exports=e},845:e=>{e.exports=t}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={id:e,exports:{}};return n[e](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nc=void 0;var a={};o.r(a),o.d(a,{initChat:()=>I});var i=o(883),s=o(845),c=o.n(s),l=o(848);const d=e=>{let{projectId:t,apiKey:n,placement:r="floating",initialMessage:o="Hey! Ready to plan your trip?"}=e;const[a,s]=(0,i.useState)(!1),[c,d]=(0,i.useState)([]),[u,p]=(0,i.useState)(""),[f,y]=(0,i.useState)([]),[h,v]=(0,i.useState)(!1),m=(0,i.useRef)(null),x=(0,i.useRef)(`user-${Math.random().toString(36).substring(7)}`),g=()=>{m.current?.scrollIntoView({behavior:"smooth"})},b=async e=>{try{v(!0);const t=await fetch(`https://general-runtime.voiceflow.com/state/user/${x.current}/interact`,{method:"POST",headers:{Authorization:n,versionID:"production","Content-Type":"application/json"},body:JSON.stringify({request:e,config:{tts:!1,stripSSML:!0,stopAll:!0,excludeTypes:["debug","flow","block","log"]}})});if(!t.ok)throw new Error(`Voiceflow API returned ${t.status}`);const r=await t.json();if(!Array.isArray(r))throw new Error("Invalid response format from Voiceflow API");let o=[],a=[];for(const e of r)"text"===e.type?o.push({type:"assistant",content:e.payload.message}):"choice"===e.type?a=e.payload.buttons:"end"===e.type&&console.log("Conversation ended");o.length>0&&(d((e=>[...e,...o])),setTimeout(g,100)),a.length>0&&y(a)}catch(e){console.error("Error interacting with Voiceflow:",e),d((e=>[...e,{type:"assistant",content:"Sorry, I encountered an error. Please try again."}]))}finally{v(!1)}},w=async e=>{e.trim()&&(d((t=>[...t,{type:"user",content:e}])),p(""),y([]),setTimeout(g,100),await b({type:"text",payload:e}))};return(0,i.useEffect)((()=>{(async()=>{s(!0),await b({type:"launch"})})()}),[]),(0,l.jsxs)("div",{id:"voiceflow-chat-container",className:`\n        transition-opacity duration-500 ease-in-out bg-white font-hanken\n        ${a?"opacity-100":"opacity-0"}\n        ${"floating"===r?"fixed bottom-5 right-5 w-[350px] h-[500px] z-50 shadow-lg rounded-xl":"relative w-full max-w-[600px] mx-auto h-[600px]"}\n      `,"aria-live":"polite",role:"region","aria-label":"Chat interface",children:[(0,l.jsxs)("div",{className:"border-b border-gray-100 p-4",children:[(0,l.jsx)("h2",{className:"text-lg font-gilda text-gray-900",children:"Luxury Travel Concierge"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Your personal travel planning assistant"})]}),(0,l.jsxs)("div",{className:"flex flex-col h-[calc(100%-8rem)]",children:[(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.map(((e,t)=>(0,l.jsx)("div",{className:`flex ${"user"===e.type?"justify-end":"justify-start"} message ${e.type}`,children:(0,l.jsx)("div",{className:"max-w-[80%] rounded-lg px-4 py-2 "+("user"===e.type?"bg-primary text-white":"bg-secondary text-text"),children:e.content})},t))),h&&(0,l.jsx)("div",{className:"flex justify-start",children:(0,l.jsx)("div",{className:"bg-secondary text-text rounded-lg px-4 py-2 typing",children:"typing..."})}),(0,l.jsx)("div",{ref:m})]}),f.length>0&&(0,l.jsx)("div",{className:"p-4 space-y-2",children:f.map(((e,t)=>(0,l.jsx)("button",{onClick:()=>(async e=>{d((t=>[...t,{type:"user",content:e.name}])),y([]),setTimeout(g,100),await b(e.request)})(e),className:"w-full text-left px-4 py-2 rounded-lg choice-button font-gilda",children:e.name},t)))}),(0,l.jsx)("div",{className:"border-t p-4 input-area",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),w(u))},placeholder:"Share your travel vision...",className:"flex-1 px-4 py-2 rounded-lg focus:outline-none",disabled:h}),(0,l.jsx)("button",{onClick:()=>w(u),disabled:h||!u.trim(),className:"px-4 py-2 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed font-gilda","aria-label":"Send message",children:"Send"})]})})]})]})};var u=o(72),p=o.n(u),f=o(825),y=o.n(f),h=o(659),v=o.n(h),m=o(56),x=o.n(m),g=o(540),b=o.n(g),w=o(113),j=o.n(w),S=o(822),k={};k.styleTagTransform=j(),k.setAttributes=x(),k.insert=v().bind(null,"head"),k.domAPI=y(),k.insertStyleElement=b(),p()(S.A,k),S.A&&S.A.locals&&S.A.locals;const I=e=>{const{projectId:t,apiKey:n,placement:r="floating",containerId:o}=e;if(o){const e=document.getElementById(o);if(!e)return void console.error(`Container with id "${o}" not found`);c().render((0,l.jsx)(d,{projectId:t,apiKey:n,placement:"inline",initialMessage:"Hi there! I'm your luxury travel concierge. How can I help you plan your perfect getaway?"}),e)}else{const e=document.createElement("div");e.id="luxurist-chatbot-container",document.body.appendChild(e),c().render((0,l.jsx)(d,{projectId:t,apiKey:n,placement:"floating",initialMessage:"Hi there! I'm your luxury travel concierge. How can I help you plan your perfect getaway?"}),e)}};return a})()));